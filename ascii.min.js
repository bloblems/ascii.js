"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;const ascii_style=".ascii{font-family:Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace;display:inline-block;overflow-x:hidden;white-space:pre}.ascii_line{display:block}.ascii_links a{position:absolute}.ascii_links a:hover{cursor:pointer}",round=Math.round,floor=Math.floor,ceil=Math.ceil,rand=Math.random,abs=Math.abs,cos=Math.cos,sin=Math.sin,acos=Math.acos,asin=Math.asin,acosh=Math.acosh,asinh=Math.asinh,atan=Math.atan,atan2=Math.atan2,atanh=Math.atanh,cbrt=Math.cbrt,exp=Math.exp,log=Math.log,max=Math.max,min=Math.min,pow=Math.pow,sqrt=Math.sqrt,tan=Math.tan,tanh=Math.tanh,trunc=Math.trunc,is_int=Number.isInteger,is_array=Array.isArray,PI=Math.PI,TWO_PI=2*PI,HALF_PI=PI/2,QUARTER_PI=PI/4,E=Math.E,SQRT2=Math.SQRT2,SQRT1_2=Math.SQRT1_2,LN2=Math.LN2,LN10=Math.LN10,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,DOM_CLASS_ASCII="ascii",DOM_CLASS_ASCII_ARRAY="ascii_array",DOM_CLASS_ASCII_LINKS="ascii_links",DOM_CLASS_ASCII_LINE="ascii_line",CANVAS_FIT=0,CANVAS_COVER=1,CANVAS_DEFAULT_FIT=CANVAS_FIT,RECT_CORNER=0,RECT_CENTER=1,RECT_DEFAULT_BORDER_CHARS="\u250C\u2500\u2510\u2502 \u2502\u2514\u2500\u2518",RECT_DEFAULT_MODE=0,LINE_DEFAULT_CHAR=".",TEXT_TRIM=0,TEXT_WRAP=1,TEXT_WRAP_HARD=2,TEXT_LEFT=0,TEXT_CENTER=1,TEXT_RIGHT=2,TEXT_ALIGN_LEFT=0,TEXT_ALIGN_CENTER=1,TEXT_ALIGN_RIGHT=2,TEXT_DEFAULT_WRAP=TEXT_TRIM,TEXT_DEFAULT_MODE=0,TEXT_DEFAULT_ALIGN=TEXT_ALIGN_LEFT,DRAW_TEXT=0,DRAW_HTML=1,DRAW_DEFAULT_MODE=DRAW_TEXT;function random(t=null,e=null){return 1==is_array(t)?t[floor(rand()*t.length)]:null==t?rand():null==e?rand()*t:t<e?rand()*(e-t)+t:rand()*(t-e)+e}function shuffle(t,e=!1){let n,i,o;for(0==e&&(t=t.slice()),n=t.length-1;n>=1;--n)i=floor(random(n)),o=t[n],t[n]=t[i],t[i]=o;return t}function map(t,e,n,i,o,l=!1){return t=(t=(t-e)/(n-e))*(o-i)+i,1==l?min(o,max(i,t)):t}function is_float(t){return"number"==typeof t&&t%1!=0}class FrameLoop{constructor(t,e=0,n=t){this.max=t,this.from=e,this.to=n,this.frame=0,this.value=e}inc(){this.frame+=1,this.frame>=this.max&&(this.frame=0),this.value=map(this.frame,0,this.max,this.from,this.to)}}function create_ascii(t=window){t.ascii=null,t.canvas_width=0,t.canvas_height=0,t.layer_width=0,t.layer_height=0,t.char_width=0,t.char_height=0,t.mouse_x=0,t.mouse_y=0,t.touches=null;let e=null,n=null,i=null,o=null,l=null,a=CANVAS_DEFAULT_FIT,r=RECT_DEFAULT_BORDER_CHARS,s=RECT_DEFAULT_MODE,_=LINE_DEFAULT_CHAR,h=TEXT_DEFAULT_MODE,u=TEXT_DEFAULT_WRAP,c=TEXT_DEFAULT_ALIGN,d=DRAW_DEFAULT_MODE,f=!0;function T(){"function"==typeof t.setup&&(t.setup(),"function"==typeof t.draw&&(document.addEventListener("mousemove",y),document.addEventListener("touchstart",m),document.addEventListener("touchmove",m),document.addEventListener("touchend",m),"function"==typeof t.mouse_clicked&&document.addEventListener("click",t.mouse_clicked),"function"==typeof t.mouse_double_clicked&&document.addEventListener("dblclick",t.mouse_double_clicked),"function"==typeof t.mouse_down&&document.addEventListener("mousedown",t.mouse_down),"function"==typeof t.mouse_up&&document.addEventListener("mouseup",t.mouse_up),"function"==typeof t.mouse_move&&document.addEventListener("mousemove",t.mouse_move),"function"==typeof t.key_down&&document.addEventListener("keydown",t.key_down),"function"==typeof t.key_up&&document.addEventListener("keyup",t.key_up),"function"==typeof t.touch_start&&document.addEventListener("touchstart",t.touch_start),"function"==typeof t.touch_end&&document.addEventListener("touchend",t.touch_end),"function"==typeof t.touch_move&&document.addEventListener("touchmove",t.touch_move),"function"==typeof t.window_resized&&window.addEventListener("resize",t.window_resized),window.requestAnimationFrame(E)))}function E(){let e,i;if(t.draw(),i=n.childNodes,d==DRAW_TEXT)if(null==l)for(e=0;e<t.canvas_height;++e)i[e].textContent=t.ascii[e].join("");else!function(e){let n,i,o,a,r,s,_,h,u;for(o=0;o<t.canvas_height;++o){for(a=l[o],r=t.ascii[o],h=null,u=null,n="",i=0;i<t.canvas_width;++i)_=a[i][0],(s=a[i][1])!=h||_!=u?(null==h&&null==u?(n+='<span style="',null!=s&&(n+="color:"+s+";"),null!=_&&(n+="background:"+_),n+='">'+r[i]):(n+="</span>",null==s&&null==_||(n+='<span style="',null!=s&&(n+="color:"+s+";"),null!=_&&(n+="background:"+_),n+='">'),n+=r[i]),u=_,h=s):n+=r[i];null==h&&null==u||(n+="</span>"),e[o].innerHTML=n}}(i);else for(e=0;e<t.canvas_height;++e)i[e].innerHTML=t.ascii[e].join("");1==f&&window.requestAnimationFrame(E)}function y(e){let i,o,l;i=n.getBoundingClientRect(),o=e.clientX-i.left,o=round(o/i.width*t.canvas_width),mouse_x=min(o,t.canvas_width-1),l=e.clientY-i.top,l=round(l/i.height*t.canvas_height),mouse_y=min(l,t.canvas_height-1)}function m(e){let i,o,l,a;if(t.touches=[],e.touches.length>0)for(o=n.getBoundingClientRect(),i=0;i<e.touches.length;++i)l=e.touches[i].clientX-o.left,l=floor(l/o.width*t.canvas_width),a=e.touches[i].clientY-o.top,a=floor(a/o.height*t.canvas_height),t.touches.push({x:l,y:a})}t.Link=class{constructor(e,n,o,l,a=1){let r,s,_;0==is_int(n)&&(n=floor(n)),0==is_int(o)&&(o=floor(o)),"string"==typeof l?(this.string=l,s=l.length,_=1):(s=floor(l),_=floor(a)),(r=document.createElement("a")).style.left=t.char_width*n+"px",r.style.top=t.char_height*o+"px",r.style.width=t.char_width*s+"px",r.style.height=t.char_height*_+"px",i.appendChild(r),"string"==typeof e?r.href=e:"function"==typeof e&&(r.onclick=e),this.dom=r,this.url=e,this.x=n,this.y=o,this.w=s,this.h=_}print(){let e,n;if(n=o,null!=this.string){if(this.y<0||this.y>=t.layer_height)return;for(e=0;e<this.string.length;++e)if(!(this.x+e<0)){if(this.x+e>=t.layer_width)return;n[this.y][this.x+e]=this.string[e]}}}move_to(e,n){0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),this.x=e,this.dom.style.left=t.char_width*e+"px",this.y=n,this.dom.style.top=t.char_height*n+"px"}remove(){1==i.contains(this.dom)&&i.removeChild(this.dom)}activate(){0==i.contains(this.dom)&&i.appendChild(this.dom)}},t.create_canvas=function(l=null,r=null,s=null){let _,h,u,c,d,f,T,E;if(l&&l.appendChild?c=l:"string"==typeof l?c=document.getElementById(l):(d=l,f=r,c="string"==typeof s?document.getElementById(s):s),null==c&&(c=document.body),null==e&&((e=document.createElement("div")).className=DOM_CLASS_ASCII,(n=document.createElement("div")).className=DOM_CLASS_ASCII_ARRAY,e.appendChild(n),(i=document.createElement("div")).className=DOM_CLASS_ASCII_LINKS,e.appendChild(i)),0==c.contains(e)&&c.appendChild(e),T=c.offsetWidth||0,E=c.offsetHeight||0,h=document.createElement("span"),n.appendChild(h),0==d||null==d?(h.textContent+=" ".repeat(100),u=T/(n.offsetWidth/100),d=floor(u)-(a==CANVAS_FIT?1:0),d=max(1,d),h.textContent=" ".repeat(d)):(0==is_int(d)&&(d=floor(d)),h.textContent+=" ".repeat(d)),h.className=DOM_CLASS_ASCII_LINE,t.ascii=[h.textContent.split("")],0==f||null==f){for(;n.offsetHeight<=E;)n.appendChild(h.cloneNode(!0)),t.ascii.push(h.textContent.split(""));a==CANVAS_FIT&&n.offsetHeight>E&&n.childNodes.length>1&&(t.ascii.pop(),n.removeChild(n.firstChild)),f=n.childNodes.length}else for(0==is_int(f)&&(f=floor(f)),_=1;_<f;++_)n.appendChild(h.cloneNode(!0)),t.ascii.push(h.textContent.split(""));t.char_width=n.offsetWidth/d,t.char_height=n.offsetHeight/f,t.canvas_width=d,t.canvas_height=f,t.layer_width=d,t.layer_height=f,o=t.ascii},t.resize_canvas=function(t=null,i=null){for(0==is_int(t)&&(t=floor(t)),0==is_int(i)&&(i=floor(i));n.firstChild;)n.removeChild(n.lastChild);create_canvas(t,i,e.parentNode)},t.move_canvas=function(n=0,i=0,o=!1,l="absolute"){e.style.position=l,1==o?(e.style.top=floor(i*t.char_height)+"px",e.style.left=floor(n*t.char_width)+"px"):(e.style.top=i+"px",e.style.left=n+"px")},t.set_canvas_fit=function(t=CANVAS_DEFAULT_FIT){a=t},t.create_layer=function(e=t.canvas_width,n=t.canvas_height){let i,o;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),i=[],o=0;o<n;++o)i.push(" ".repeat(e).split(""));return i},t.set_layer=function(e=null){null==e?(o=t.ascii,t.layer_width=t.canvas_width,t.layer_height=t.canvas_height):(o=e,t.layer_width=e[0].length,t.layer_height=e.length)},t.draw_layer=function(e,n=0,i=0){let l,a,r,s,_,h,u,c,d,f;for(0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),_=e[0].length,h=e.length,l=o,f=0;f<h;++f)if(!((c=i+f)<0)){if(c>=t.layer_height)return;for(a=l[c],r=e[f],d=0;d<_;++d)(u=n+d)<0||u>=t.layer_width||" "!=(s=r[d])&&(a[u]=s)}},t.create_mask=t.create_layer,t.put_mask=function(e,n=0,i=0,l=!1){let a,r,s,_,h,u,c,d,f,T,E,y;for("boolean"==typeof n&&(l=n,n=0),d=i,0==is_int(c=n)&&(c=floor(c)),0==is_int(d)&&(d=floor(d)),h=e[0].length,u=e.length,a=o,y=0;y<u;++y)if(!((T=d+y)<0)){if(T>=t.layer_height)return;for(r=a[T],s=e[y],E=0;E<h;++E)(f=c+E)<0||f>=t.layer_width||" "==(_=s[E])^1==l&&(r[f]=" ")}},t.create_color_layer=function(){let e,n,i,o;for(e=[],o=0;o<t.canvas_height;++o){for(n=[],i=0;i<t.canvas_width;++i)n.push([null,null]);e.push(n)}return e},t.set_color=function(t=null){l=t},t.clear_color_layer=function(e){let n,i;for(i=0;i<t.canvas_height;++i)for(n=0;n<t.canvas_width;++n)e[i][n][0]=null,e[i][n][1]=null},t.set_rect_border=function(t=null){r=t||RECT_DEFAULT_BORDER_CHARS},t.set_rect_mode=function(t=RECT_DEFAULT_MODE){s=t},t.rect=function(e,n,i,l=i,a=null){let _,h,u,c;if(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(l)&&(l=floor(l)),s==RECT_CENTER&&(e-=round(i/2),n-=round(l/2)),!(e>=t.layer_width||e+i<0||n>=t.layer_height||n+l<0)){if(_=o,h=a||r,1==l?(h=h.split(""),1==i?h[6]=h[4]:(h[6]=h[3],h[7]=h[4],h[8]=h[5])):1==i&&((h=h.split(""))[0]=h[1],h[3]=h[4],h[6]=h[7]),l>1&&n>=0)for(u=0;u<i;++u)e+u>=0&&e+u<t.layer_width&&(_[n][e+u]=0==u?h[0]:u==i-1?h[2]:h[1]);for(c=1;c<l-1;++c)if(n+c>=0&&n+c<t.layer_height)for(u=0;u<i;++u)e+u>=0&&e+u<t.layer_width&&(_[n+c][e+u]=0==u?h[3]:u==i-1?h[5]:h[4]);if(n+l-1>=0&&n+l-1<t.layer_height)for(u=0;u<i;++u)e+u>=0&&e+u<t.layer_width&&(_[n+l-1][e+u]=0==u?h[6]:u==i-1?h[8]:h[7])}},t.border=function(e){let n,i,o;for(n=create_layer(),o=0;o<t.layer_height;++o)for(i=0;i<t.layer_width;++i)" "==layer[o][i]&&(i>0&&" "!=layer[o][i-1]||i+1<t.layer_width&&" "!=layer[o][i+1]||o>0&&" "!=layer[o-1][i]||o+1<t.layer_height&&" "!=layer[o+1][i]||i>0&&o>0&&" "!=layer[o-1][i-1]||i+1<t.layer_width&&o>0&&" "!=layer[o-1][i+1]||i+1<t.layer_width&&o+1<t.layer_height&&" "!=layer[o+1][i+1]||i>0&&o+1<t.layer_height&&" "!=layer[o+1][i-1])&&(n[o][i]=e);draw_layer(n)},t.set_line_char=function(t=null){_=t||LINE_DEFAULT_CHAR},t.line=function(e,n,i,l,a=null){let r,s,h,u,c,d,f;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(l)&&(l=floor(l)),r=o,a=a||_,u=e<i?1:-1,c=n<l?1:-1,d=(s=abs(i-e))+(h=-abs(l-n));e>=0&&e<t.layer_width&&n>=0&&n<t.layer_height&&(r[n][e]=a),e!=i||n!=l;)(f=2*d)>=h&&(d+=h,e+=u),f<=s&&(d+=s,n+=c)},t.line_func=function(e,n,i,l,a){let r,s,_,h,u,c,d;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(l)&&(l=floor(l)),r=o,h=e<i?1:-1,u=n<l?1:-1,c=(s=abs(i-e))+(_=-abs(l-n));a(e,n,e>=0&&e<t.layer_width&&n>=0&&n<t.layer_height),e!=i||n!=l;)(d=2*c)>=_&&(c+=_,e+=h),d<=s&&(c+=s,n+=u)},t.set_text_wrap=function(t=TEXT_DEFAULT_WRAP){u=t},t.set_text_mode=function(t=TEXT_DEFAULT_MODE){h=t},t.set_text_align=function(t=TEXT_DEFAULT_ALIGN){c=t},t.text=function(e,n,i,l=null){let a,r,s,_,d,f,T,E,y;if(0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),null!=l&&0==is_int(l)&&(l=floor(l)),a=o,i>=t.layer_height)return null;if(u==TEXT_TRIM){for(h==TEXT_CENTER?n-=floor(e.length/2):h==TEXT_RIGHT&&(n-=e.length),E=0;E<e.length;++E)if(n<0||" "==e[E])++n;else{if(n>=t.layer_width)return null;a[i][n]=e[E],++n}return[n,i]}if(u==TEXT_WRAP_HARD){for(null!=l&&(h==TEXT_CENTER?n-=floor(l/2):h==TEXT_RIGHT&&(n-=l)),T=null==l?t.layer_width-1:n+l,s=0,E=0;E<e.length;++E)if(n+s<0||n+s>=t.layer_width||" "==e[E])++s;else if(a[i][n+s]=e[E],n+ ++s>T&&(s=0,++i>=t.layer_height))return null;return[n+s,i]}for(null!=l&&(h==TEXT_CENTER?n-=floor(l/2):h==TEXT_RIGHT&&(n-=l)),0==(r=e.split(" "))[r.length-1].length&&(r=r.slice(0,-1)),T=null==l?t.layer_width-1:n+l,s=0,_="",E=0;E<r.length;++E)if(0!=(f=r[E]).length){if(n+_.length+f.length-1>T)if(n+f.length-1>T){for(;n+f.length-1>=T;){for(d=f.substr(0,T-(n+_.length)+0),y=0;y<d.length;++y)n+y>=0&&n+y<t.layer_width&&(a[i][n+y]=d[y]);if(f=f.substr(T-(n+_.length)),_="",++i>=t.layer_height)return null}++E}else{for(null==l||c==TEXT_ALIGN_LEFT?s=n:c==TEXT_ALIGN_CENTER?s=n+round((l-_.length)/2):c==TEXT_ALIGN_RIGHT&&(s=n+l-_.length+1),y=0;y<_.length-1;++y)" "!=_[y]&&n>=0&&n<t.layer_width&&(a[i][s+y]=_[y]);if(_="",++i>=t.layer_height)return null}E<r.length-1?_+=f+" ":_+=f}for(null==l||c==TEXT_ALIGN_LEFT?s=n:c==TEXT_ALIGN_CENTER?s=n+round((l-_.length)/2):c==TEXT_ALIGN_RIGHT&&(s=n+l-_.length+1),y=0;y<_.length;++y)" "!=_[y]&&(a[i][s+y]=_[y]);return[s+y,i]},t.shape=function(e,n,i,l,a,r,s=!0,_=0){let h,u,c,d,f,T,E,y;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),d=null,h=o,c=TWO_PI/a,y=0;y<TWO_PI;y+=c)T=round(e+cos(u=y+_*c)*i),E=round(n+sin(u)*l),1==s?(null!=d&&line(T,E,d,f,r),d=T,f=E):T>=0&&T<t.layer_width&&E>=0&&E<t.layer_height&&(h[E][T]=r);1==s&&(T=round(e+cos(_*c)*i),E=round(n+sin(_*c)*l),line(T,E,d,f,r))},t.clear=function(t=null){let e,n,i,l,a,r;for(i=(e=t||o)[0].length,l=e.length,r=0;r<l;++r)for(n=e[r],a=0;a<i;++a)n[a]=" "},t.background=function(e){let n,i,l,a;for(n=o,a=0;a<t.layer_height;++a)for(i=n[a],l=0;l<t.layer_width;++l)i[l]=e},t.fill=function(e,n,i){let l,a;0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),(a=(l=o)[n][e])!=i&&(l[n][e]=i,e>0&&l[n][e-1]==a&&fill(e-1,n,i),e<t.layer_width-1&&l[n][e+1]==a&&fill(e+1,n,i),n>0&&l[n-1][e]==a&&fill(e,n-1,i),n<t.layer_height-1&&l[n+1][e]==a&&fill(e,n+1,i))},t.is_on_canvas=function(t,e){return t>=0&&t<canvas_width&&e>=0&&e<canvas_height},t.is_on_layer=function(t,e){return t>=0&&t<layer_width&&e>=0&&e<layer_height},t.no_loop=function(){f=!1},t.loop=function(){(f=!1)&&(f=!0,"function"==typeof t.draw&&window.requestAnimationFrame(E))},t.set_draw_mode=function(t=DRAW_DEFAULT_MODE){d=t},"complete"==document.readyState?T():window.addEventListener("load",T)}window.addEventListener("load",function(){let t;(t=document.createElement("style")).type="text/css",t.innerText=ascii_style,document.head.appendChild(t)}),create_ascii();
