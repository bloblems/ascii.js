"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;const ascii_style=".ascii{font-family:Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace;display:inline-block;overflow-x:hidden;white-space:pre}.ascii_line{display:block}.ascii_links a{position:absolute}.ascii_links a:hover{cursor:pointer}",round=Math.round,floor=Math.floor,ceil=Math.ceil,rand=Math.random,abs=Math.abs,cos=Math.cos,sin=Math.sin,acos=Math.acos,asin=Math.asin,acosh=Math.acosh,asinh=Math.asinh,atan=Math.atan,atan2=Math.atan2,atanh=Math.atanh,cbrt=Math.cbrt,exp=Math.exp,log=Math.log,max=Math.max,min=Math.min,pow=Math.pow,sqrt=Math.sqrt,tan=Math.tan,tanh=Math.tanh,trunc=Math.trunc,is_int=Number.isInteger,is_array=Array.isArray,PI=Math.PI,TWO_PI=2*PI,HALF_PI=PI/2,QUARTER_PI=PI/4,E=Math.E,SQRT2=Math.SQRT2,SQRT1_2=Math.SQRT1_2,LN2=Math.LN2,LN10=Math.LN10,LOG2E=Math.LOG2E,LOG10E=Math.LOG10E,DOM_CLASS_ASCII="ascii",DOM_CLASS_ASCII_ARRAY="ascii_array",DOM_CLASS_ASCII_LINKS="ascii_links",DOM_CLASS_ASCII_LINE="ascii_line",MOUSE_LEFT=0,MOUSE_MIDDLE=1,MOUSE_RIGHT=2,KEY_BACKSPACE=8,KEY_DELETE=46,KEY_ENTER=13,KEY_RETURN=13,KEY_TAB=9,KEY_ESCAPE=27,KEY_SHIFT=16,KEY_CONTROL=17,KEY_OPTION=17,KEY_ALT=18,KEY_UP=38,KEY_DOWN=40,KEY_LEFT=37,KEY_RIGHT=39,CANVAS_FIT=0,CANVAS_COVER=1,CANVAS_DEFAULT_FIT=CANVAS_FIT,BOX_CORNER=0,BOX_CENTER=1,BOX_TRANSPARENT=0,BOX_COVER=1,BOX_HOVER=0,BOX_INTERSECTION=1,BOX_BORDERS=[" \u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u2534\u252C\u253C"," \u2550\u2551\u2554\u2557\u255A\u255D\u2560\u2563\u2569\u2566\u256C"," \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"],BOX_DEFAULT_MODE=0,BOX_DEFAULT_BORDER_CHARS=BOX_BORDERS[0],BOX_DEFAULT_ALPHA=0,BOX_DEFAULT_INTERSECTION=0,BOX_BORDER_INTERSECTION_HORIZONTAL=[1,1,11,10,10,9,9,11,11,9,10,11],BOX_BORDER_INTERSECTION_VERTICAL=[2,11,2,7,8,7,8,7,8,11,11,11],BOX_BORDER_INTERSECTION_TOP_LEFT=[3,10,7,3,10,7,11,7,11,11,10,11],BOX_BORDER_INTERSECTION_TOP_RIGHT=[4,10,8,10,4,11,8,11,8,11,10,11],BOX_BORDER_INTERSECTION_BOTTOM_LEFT=[5,9,7,7,11,5,9,7,11,9,11,11],BOX_BORDER_INTERSECTION_BOTTOM_RIGHT=[6,9,8,11,8,11,6,11,8,9,11,11],LINE_DEFAULT_CHAR=".",TEXT_BLOCK=0,TEXT_WRAP=1,TEXT_WRAP_HARD=2,TEXT_LEFT=0,TEXT_CENTER=1,TEXT_RIGHT=2,TEXT_ALIGN_LEFT=0,TEXT_ALIGN_CENTER=1,TEXT_ALIGN_RIGHT=2,TEXT_DEFAULT_WRAP=TEXT_BLOCK,TEXT_DEFAULT_MODE=0,TEXT_DEFAULT_ALIGN=TEXT_ALIGN_LEFT,DRAW_TEXT=0,DRAW_HTML=1,DRAW_DEFAULT_MODE=DRAW_TEXT;function random(t=null,e=null){return 1==is_array(t)?t[floor(rand()*t.length)]:null==t?rand():null==e?rand()*t:t<e?rand()*(e-t)+t:rand()*(t-e)+e}function shuffle(t,e=!1){let n,i,o;for(0==e&&(t=t.slice()),n=t.length-1;n>=1;--n)i=floor(random(n)),o=t[n],t[n]=t[i],t[i]=o;return t}function map(t,e,n,i,o,_=!1){return t=(t=(t-e)/(n-e))*(o-i)+i,1==_?min(o,max(i,t)):t}function constrain(t,e,n){return min(n,max(e,t))}function is_float(t){return"number"==typeof t&&t%1!=0}class FrameLoop{constructor(t,e=0,n=t){this.max=t,this.from=e,this.to=n,this.frame=0,this.value=e}inc(){this.frame+=1,this.frame>=this.max&&(this.frame=0),this.value=map(this.frame,0,this.max,this.from,this.to)}}function create_ascii(t=window){t.ascii=null,t.canvas_width=0,t.canvas_height=0,t.layer_width=0,t.layer_height=0,t.char_width=0,t.char_height=0,t.mouse_x=0,t.mouse_y=0,t.touches=null;let e=null,n=null,i=null,o=null,_=null,l=CANVAS_DEFAULT_FIT,a=BOX_DEFAULT_BORDER_CHARS,r=BOX_DEFAULT_MODE,s=BOX_DEFAULT_ALPHA,h=BOX_DEFAULT_INTERSECTION,u=LINE_DEFAULT_CHAR,c=TEXT_DEFAULT_MODE,f=TEXT_DEFAULT_WRAP,d=TEXT_DEFAULT_ALIGN,E=DRAW_DEFAULT_MODE,T=!0,O=[],R=[];function m(){"function"==typeof t.setup&&(t.setup(),"function"==typeof t.draw&&(document.addEventListener("keydown",A),document.addEventListener("keyup",I),document.addEventListener("mousedown",p),document.addEventListener("mouseup",L),document.addEventListener("mousemove",C),document.addEventListener("touchstart",N),document.addEventListener("touchmove",N),document.addEventListener("touchend",N),"function"==typeof t.mouse_clicked&&document.addEventListener("click",t.mouse_clicked),"function"==typeof t.mouse_double_clicked&&document.addEventListener("dblclick",t.mouse_double_clicked),"function"==typeof t.mouse_down&&document.addEventListener("mousedown",t.mouse_down),"function"==typeof t.mouse_up&&document.addEventListener("mouseup",t.mouse_up),"function"==typeof t.mouse_move&&document.addEventListener("mousemove",t.mouse_move),"function"==typeof t.key_down&&document.addEventListener("keydown",t.key_down),"function"==typeof t.key_up&&document.addEventListener("keyup",t.key_up),"function"==typeof t.touch_start&&document.addEventListener("touchstart",t.touch_start),"function"==typeof t.touch_end&&document.addEventListener("touchend",t.touch_end),"function"==typeof t.touch_move&&document.addEventListener("touchmove",t.touch_move),"function"==typeof t.window_resized&&window.addEventListener("resize",t.window_resized),window.requestAnimationFrame(y)))}function y(){let e,i;if(t.draw(),i=n.childNodes,E==DRAW_TEXT)if(null==_)for(e=0;e<t.canvas_height;++e)i[e].textContent=t.ascii[e].join("");else!function(e){let n,i,o,l,a,r,s,h,u;for(o=0;o<t.canvas_height;++o){for(l=_[o],a=t.ascii[o],h=null,u=null,n="",i=0;i<t.canvas_width;++i)s=l[i][0],(r=l[i][1])!=h||s!=u?(null==h&&null==u?(n+='<span style="',null!=r&&(n+="color:"+r+";"),null!=s&&(n+="background:"+s),n+='">'+a[i]):(n+="</span>",null==r&&null==s||(n+='<span style="',null!=r&&(n+="color:"+r+";"),null!=s&&(n+="background:"+s),n+='">'),n+=a[i]),u=s,h=r):n+=a[i];null==h&&null==u||(n+="</span>"),e[o].innerHTML=n}}(i);else for(e=0;e<t.canvas_height;++e)i[e].innerHTML=t.ascii[e].join("");1==T&&window.requestAnimationFrame(y)}function A(t){R[t.keyCode]=!0}function I(t){R[t.keyCode]=!1}function p(t){O[t.button]=!0}function L(t){O[t.button]=!1}function C(e){let i,o,_;i=n.getBoundingClientRect(),o=e.clientX-i.left,o=round(o/i.width*t.canvas_width),mouse_x=min(o,t.canvas_width-1),_=e.clientY-i.top,_=round(_/i.height*t.canvas_height),mouse_y=min(_,t.canvas_height-1)}function N(e){let i,o,_,l;if(t.touches=[],e.touches.length>0)for(o=n.getBoundingClientRect(),i=0;i<e.touches.length;++i)_=e.touches[i].clientX-o.left,_=floor(_/o.width*t.canvas_width),l=e.touches[i].clientY-o.top,l=floor(l/o.height*t.canvas_height),t.touches.push({x:_,y:l})}t.Link=class{constructor(e,n,o,_,l=1){let a,r,s;0==is_int(n)&&(n=floor(n)),0==is_int(o)&&(o=floor(o)),"string"==typeof _?(this.string=_,r=_.length,s=1):(r=floor(_),s=floor(l)),(a=document.createElement("a")).style.left=t.char_width*n+"px",a.style.top=t.char_height*o+"px",a.style.width=t.char_width*r+"px",a.style.height=t.char_height*s+"px",i.appendChild(a),"string"==typeof e?a.href=e:"function"==typeof e&&(a.onclick=e),this.dom=a,this.url=e,this.x=n,this.y=o,this.w=r,this.h=s}print(){let e,n;if(n=o,null!=this.string){if(this.y<0||this.y>=t.layer_height)return;for(e=0;e<this.string.length;++e)if(!(this.x+e<0)){if(this.x+e>=t.layer_width)return;n[this.y][this.x+e]=this.string[e]}}}move_to(e,n){0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),this.x=e,this.dom.style.left=t.char_width*e+"px",this.y=n,this.dom.style.top=t.char_height*n+"px"}remove(){1==i.contains(this.dom)&&i.removeChild(this.dom)}activate(){0==i.contains(this.dom)&&i.appendChild(this.dom)}},t.create_canvas=function(_=null,a=null,r=null){let s,h,u,c,f,d,E,T;if(_&&_.appendChild?c=_:"string"==typeof _?c=document.getElementById(_):(f=_,d=a,c="string"==typeof r?document.getElementById(r):r),null==c&&(c=document.body),null==e&&((e=document.createElement("div")).className=DOM_CLASS_ASCII,(n=document.createElement("div")).className=DOM_CLASS_ASCII_ARRAY,e.appendChild(n),(i=document.createElement("div")).className=DOM_CLASS_ASCII_LINKS,e.appendChild(i)),0==c.contains(e)&&c.appendChild(e),E=c.offsetWidth||0,T=c.offsetHeight||0,h=document.createElement("span"),n.appendChild(h),0==f||null==f?(h.textContent+=" ".repeat(100),u=E/(n.offsetWidth/100),f=floor(u)-(l==CANVAS_FIT?1:0),f=max(1,f),h.textContent=" ".repeat(f)):(0==is_int(f)&&(f=floor(f)),h.textContent+=" ".repeat(f)),h.className=DOM_CLASS_ASCII_LINE,t.ascii=[h.textContent.split("")],0==d||null==d){for(;n.offsetHeight<=T;)n.appendChild(h.cloneNode(!0)),t.ascii.push(h.textContent.split(""));l==CANVAS_FIT&&n.offsetHeight>T&&n.childNodes.length>1&&(t.ascii.pop(),n.removeChild(n.firstChild)),d=n.childNodes.length}else for(0==is_int(d)&&(d=floor(d)),s=1;s<d;++s)n.appendChild(h.cloneNode(!0)),t.ascii.push(h.textContent.split(""));t.char_width=n.offsetWidth/f,t.char_height=n.offsetHeight/d,t.canvas_width=f,t.canvas_height=d,t.layer_width=f,t.layer_height=d,o=t.ascii},t.resize_canvas=function(t=null,i=null){for(0==is_int(t)&&(t=floor(t)),0==is_int(i)&&(i=floor(i));n.firstChild;)n.removeChild(n.lastChild);create_canvas(t,i,e.parentNode)},t.move_canvas=function(n=0,i=0,o=!1,_="absolute"){e.style.position=_,1==o?(e.style.top=floor(i*t.char_height)+"px",e.style.left=floor(n*t.char_width)+"px"):(e.style.top=i+"px",e.style.left=n+"px")},t.set_canvas_fit=function(t=CANVAS_DEFAULT_FIT){l=t},t.create_layer=function(e=t.canvas_width,n=t.canvas_height){let i,o;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),i=[],o=0;o<n;++o)i.push(" ".repeat(e).split(""));return i},t.set_layer=function(e=null){null==e?(o=t.ascii,t.layer_width=t.canvas_width,t.layer_height=t.canvas_height):(o=e,t.layer_width=e[0].length,t.layer_height=e.length)},t.draw_layer=function(e,n=0,i=0,_=0,l=0,a=null,r=null){let s,h,u,c,f,d,E,T,O,R;for(0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(_)&&(_=floor(_)),0==is_int(l)&&(l=floor(l)),f=e[0].length,d=e.length,null==a?a=e[0].length-_:0==is_int(a)&&(a=floor(a)),null==r?r=e.length-l:0==is_int(r)&&(r=floor(r)),a=min(a,f-_),r=min(r,d-l),s=o,R=0;R<r;++R)if(!((T=i+R)<0)){if(T>=t.layer_height)return;for(h=s[T],u=e[R+l],O=0;O<a;++O)(E=n+O)<0||E>=t.layer_width||" "!=(c=u[O+_])&&(h[E]=c)}},t.create_mask=t.create_layer,t.put_mask=function(e,n=0,i=0,_=!1){let l,a,r,s,h,u,c,f,d,E,T,O;for("boolean"==typeof n&&(_=n,n=0),f=i,0==is_int(c=n)&&(c=floor(c)),0==is_int(f)&&(f=floor(f)),h=e[0].length,u=e.length,l=o,O=0;O<u;++O)if(!((E=f+O)<0)){if(E>=t.layer_height)return;for(a=l[E],r=e[O],T=0;T<h;++T)(d=c+T)<0||d>=t.layer_width||" "==(s=r[T])^1==_&&(a[d]=" ")}},t.create_color_layer=function(){let e,n,i,o;for(e=[],o=0;o<t.canvas_height;++o){for(n=[],i=0;i<t.canvas_width;++i)n.push([null,null]);e.push(n)}return e},t.set_color=function(t=null){_=t},t.clear_color_layer=function(e){let n,i;for(i=0;i<t.canvas_height;++i)for(n=0;n<t.canvas_width;++n)e[i][n][0]=null,e[i][n][1]=null},t.box=function(e,n,i,_=i,l=null){let u,c,f,d,E,T,O,R;if(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(_)&&(_=floor(_)),r==BOX_CENTER&&(e-=round(i/2),n-=round(_/2)),!(e>=t.layer_width||e+i<0||n>=t.layer_height||n+_<0||0==i||0==_)){if(c=1==is_int(l)?BOX_BORDERS[l%BOX_BORDERS.length]:l||a,u=o,n>=0&&n<t.layer_height){if(e>=0&&e<t.layer_width&&(s==BOX_COVER||" "!=c[3])&&(h==BOX_INTERSECTION?(R=BOX_BORDER_INTERSECTION_TOP_LEFT,O=c.indexOf(u[n][e]),u[n][e]=O>=0?c[R[O]]:c[3]):u[n][e]=c[3]),s==BOX_COVER||" "!=c[1])for(R=BOX_BORDER_INTERSECTION_HORIZONTAL,f=1;f<i-1;++f)if(!((E=e+f)<0)){if(E>=t.layer_width)break;h==BOX_INTERSECTION?(O=c.indexOf(u[n][E]),u[n][E]=O>=0?c[R[O]]:c[1]):u[n][E]=c[1]}(E=e+i-1)>=0&&E<t.layer_width&&(s==BOX_COVER||" "!=c[4])&&(h==BOX_INTERSECTION?(R=BOX_BORDER_INTERSECTION_TOP_RIGHT,O=c.indexOf(u[n][E]),u[n][E]=O>=0?c[R[O]]:c[4]):u[n][E]=c[4])}for(R=BOX_BORDER_INTERSECTION_VERTICAL,d=1;d<_-1;++d)if(!((T=n+d)<0)){if(T>=t.layer_height)return;if(e>=0&&e<t.layer_width&&(s==BOX_COVER||" "!=c[2])&&(h==BOX_INTERSECTION?(O=c.indexOf(u[T][e]),u[T][e]=O>=0?c[R[O]]:c[2]):u[T][e]=c[2]),s==BOX_COVER||" "!=c[0])for(f=1;f<i-1;++f)if(!((E=e+f)<0)){if(E>=t.layer_width)break;u[T][E]=c[0]}(E=e+i-1)>=0&&E<t.layer_width&&(s==BOX_COVER||" "!=c[2])&&(h==BOX_INTERSECTION?(O=c.indexOf(u[T][E]),u[T][E]=O>=0?c[R[O]]:c[2]):u[T][E]=c[2])}if((T=n+_-1)>=0&&T<t.layer_height){if(e>=0&&e<t.layer_width&&(s==BOX_COVER||" "!=c[5])&&(h==BOX_INTERSECTION?(R=BOX_BORDER_INTERSECTION_BOTTOM_LEFT,O=c.indexOf(u[T][e]),u[T][e]=O>=0?c[R[O]]:c[5]):u[T][e]=c[5]),s==BOX_COVER||" "!=c[1])for(R=BOX_BORDER_INTERSECTION_HORIZONTAL,f=1;f<i-1;++f)if(!((E=e+f)<0)){if(E>=t.layer_width)break;h==BOX_INTERSECTION?(O=c.indexOf(u[T][E]),u[T][E]=O>=0?c[R[O]]:c[1]):u[T][E]=c[1]}(E=e+i-1)>=0&&E<t.layer_width&&(s==BOX_COVER||" "!=c[6])&&(h==BOX_INTERSECTION?(R=BOX_BORDER_INTERSECTION_BOTTOM_RIGHT,O=c.indexOf(u[T][E]),u[T][E]=O>=0?c[R[O]]:c[6]):u[T][E]=c[6])}}},t.set_box_border=function(t=null){a=1==is_int(t)?BOX_BORDERS[t%BOX_BORDERS.length]:t||BOX_DEFAULT_BORDER_CHARS},t.set_box_mode=function(t=BOX_DEFAULT_MODE){r=t},t.set_box_alpha=function(t=BOX_DEFAULT_ALPHA){s=t},t.set_box_intersection=function(t=BOX_DEFAULT_INTERSECTION){h=t},t.set_line_char=function(t=null){u=t||LINE_DEFAULT_CHAR},t.line=function(e,n,i,_,l=null){let a,r,s,h,c,f,d;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(_)&&(_=floor(_)),a=o,l=l||u,h=e<i?1:-1,c=n<_?1:-1,f=(r=abs(i-e))+(s=-abs(_-n));e>=0&&e<t.layer_width&&n>=0&&n<t.layer_height&&(a[n][e]=l),e!=i||n!=_;)(d=2*f)>=s&&(f+=s,e+=h),d<=r&&(f+=r,n+=c)},t.line_func=function(e,n,i,_,l){let a,r,s,h,u,c,f,d;for(0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),0==is_int(_)&&(_=floor(_)),a=o,h=e<i?1:-1,u=n<_?1:-1,c=(r=abs(i-e))+(s=-abs(_-n));;){if(1==(d=l(e,n,e>=0&&e<t.layer_width&&n>=0&&n<t.layer_height)))return;if(e==i&&n==_)break;(f=2*c)>=s&&(c+=s,e+=h),f<=r&&(c+=r,n+=u)}},t.set_text_wrap=function(t=TEXT_DEFAULT_WRAP){f=t},t.set_text_mode=function(t=TEXT_DEFAULT_MODE){c=t},t.set_text_align=function(t=TEXT_DEFAULT_ALIGN){d=t},t.text=function(e,n,i,_=null){let l,a,r,s,h,u;if(0==is_int(n)&&(n=floor(n)),0==is_int(i)&&(i=floor(i)),null!=_&&0==is_int(_)&&(_=floor(_)),l=o,n>=t.layer_width||i>=t.layer_height)return null;if(f==TEXT_BLOCK)c==TEXT_CENTER?n-=floor(e.length/2):c==TEXT_RIGHT&&(n-=e.length);else{if(f==TEXT_WRAP){if(0==(a=_||t.layer_width-n))return null;if(null!=(r=e.match(RegExp("[\\s\n]*.{1,"+a+"}(\\s+|$\n?)|(.{1,"+a+"})","g")))&&null!=_&&d!=TEXT_ALIGN_LEFT)for(u=0;u<r.length;++u)s=r[u].trim(),r[u]=d==TEXT_ALIGN_RIGHT?" ".repeat(_-s.length)+s:" ".repeat(floor((_-s.length)/2))+s;e=null!=r?r.join("\n"):""}else if(f==TEXT_WRAP_HARD){if(0==(a=_||t.layer_width-n))return null;r=e.match(RegExp("[\\s\n]*.{1,"+a+"}","g")),e=null!=r?r.join("\n"):""}null!=_&&(c==TEXT_CENTER?n-=floor(_/2):c==TEXT_RIGHT&&(n-=_))}for(h=n,u=0;u<e.length;++u)if("\n"==e[u]){if(h=n,++i>=t.layer_height)break}else h<0||" "==e[u]?++h:h<t.layer_width&&(l[i][h]=e[u],++h);return[h,i]},t.polygon=function(t,e,n,i,_,l,a=null,r=0){let s,h,u,c,f,d,E,T,O;for(0==is_int(t)&&(t=floor(t)),0==is_int(e)&&(e=floor(e)),null!=a&&_>2?(h=o,s=create_layer(layer_width,layer_height),set_layer(s)):s=o,f=round(t+cos(u=(c=TWO_PI/_)*(_-1)+r*c)*n),d=round(e+sin(u)*i),O=0;O<TWO_PI;O+=c)E=round(t+cos(u=O+r*c)*n),T=round(e+sin(u)*i),line(E,T,f,d,l),f=E,d=T;null!=a&&_>2&&(fill(t,e,a),set_layer(h),draw_layer(s))},t.clear=function(t=null){let e,n,i,_,l,a;for(i=(e=t||o)[0].length,_=e.length,a=0;a<_;++a)for(n=e[a],l=0;l<i;++l)n[l]=" "},t.background=function(e){let n,i,_,l;for(n=o,l=0;l<t.layer_height;++l)for(i=n[l],_=0;_<t.layer_width;++_)i[_]=e},t.fill=function(e,n,i){let _,l;0==is_int(e)&&(e=floor(e)),0==is_int(n)&&(n=floor(n)),(l=(_=o)[n][e])!=i&&(_[n][e]=i,e>0&&_[n][e-1]==l&&fill(e-1,n,i),e<t.layer_width-1&&_[n][e+1]==l&&fill(e+1,n,i),n>0&&_[n-1][e]==l&&fill(e,n-1,i),n<t.layer_height-1&&_[n+1][e]==l&&fill(e,n+1,i))},t.iter_func=function(t,e=o){let n,i,_,l,a;for(l=e[0].length,a=e.length,_=0;_<a;++_)for(n=e[_],i=0;i<l;++i)t(n[i],i,_,e)},t.map_func=function(t,e=o){let n,i,_,l,a,r,s;for(r=e[0].length,s=e.length,n=create_layer(r,s),a=0;a<s;++a)for(i=e[a],_=n[a],l=0;l<r;++l)_[l]=t(i[l],l,a,e);for(a=0;a<s;++a)for(i=e[a],_=n[a],l=0;l<r;++l)i[l]=_[l]},t.is_on_canvas=function(t,e){return t>=0&&t<canvas_width&&e>=0&&e<canvas_height},t.is_on_layer=function(t,e){return t>=0&&t<layer_width&&e>=0&&e<layer_height},t.is_key_down=function(t){return R[t]||!1},t.is_mouse_down=function(t=null){return null==t?O[0]||O[1]||O[2]||!1:O[t]||!1},t.no_loop=function(){T=!1},t.loop=function(){(T=!1)&&(T=!0,"function"==typeof t.draw&&window.requestAnimationFrame(y))},t.set_draw_mode=function(t=DRAW_DEFAULT_MODE){E=t},"complete"==document.readyState?m():window.addEventListener("load",m)}window.addEventListener("load",function(){let t;(t=document.createElement("style")).type="text/css",t.innerText=ascii_style,document.head.appendChild(t)}),create_ascii();